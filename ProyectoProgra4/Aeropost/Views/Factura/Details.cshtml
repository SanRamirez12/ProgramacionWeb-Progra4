@using System.Globalization
@model Aeropost.Models.Factura
@{
    ViewData["Title"] = "Detalle de factura";
    var us = CultureInfo.CreateSpecificCulture("en-US"); // $ y punto decimal
    var cli = ViewBag.Cliente as Aeropost.Models.Cliente; // viene del controlador
}

<!-- Contenedor principal usando estilos existentes -->
<div class="clientes-container">
    <div class="clientes-wrapper">

        <!-- Título usando estilo existente -->
        <h1 class="clientes-title">Detalle de Factura</h1>

        <!-- Botones de acción usando estilos existentes -->
        <div class="action-buttons">
            <a asp-action="Index" class="btn-modern-secondary">
                <span class="btn-icon">📋</span>
                Ir al listado de facturas
            </a>
        </div>

        <!-- Tarjeta de información del cliente usando estilos existentes -->
        <div class="modern-card">
            <div class="modern-card-body">
                <div class="card-header">
                    <h2 class="card-title">
                        <span class="label-icon">👤</span>
                        Información del Cliente
                    </h2>
                </div>

                <div class="info-grid">
                    <div class="info-section">
                        <h3 class="subsection-title">
                            <span class="label-icon">📝</span>
                            Datos Personales
                        </h3>
                        <div class="info-details">
                            <div class="info-item">
                                <span class="info-label">Nombre:</span>
                                <span class="info-value">@(cli?.Nombre ?? "—")</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Cédula:</span>
                                <span class="info-value">@Model.CedulaCliente</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Correo:</span>
                                <span class="info-value">@(cli?.Correo ?? "—")</span>
                            </div>
                        </div>
                    </div>

                    <div class="info-section">
                        <h3 class="subsection-title">
                            <span class="label-icon">📍</span>
                            Contacto y Ubicación
                        </h3>
                        <div class="info-details">
                            <div class="info-item">
                                <span class="info-label">Teléfono:</span>
                                <span class="info-value">@(cli?.Telefono ?? "—")</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Dirección:</span>
                                <span class="info-value">@(cli?.Direccion ?? "—")</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Tipo:</span>
                                <span class="info-value">
                                    <span class="type-badge type-@(cli?.Tipo?.ToLower() ?? "regular")">
                                        @(cli?.Tipo ?? "—")
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tarjeta de detalle de factura usando estilos existentes -->
        <div class="modern-card">
            <div class="modern-card-body">
                <div class="card-header">
                    <h2 class="card-title">
                        <span class="label-icon">🧾</span>
                        Detalle de la Factura
                    </h2>
                </div>

                <!-- Información básica de la factura -->
                <div class="report-summary">
                    <div class="summary-item">
                        <span class="summary-label">
                            <span class="label-icon">📅</span>
                            Fecha de Entrega:
                        </span>
                        <span class="summary-value">@Model.FechaEntrega.ToString("dd/MM/yyyy")</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">
                            <span class="label-icon">📦</span>
                            Tracking:
                        </span>
                        <span class="count-badge">@Model.NumeroTracking</span>
                    </div>
                </div>

                <!-- Grid de información financiera -->
                <div class="info-grid">
                    <div class="info-section">
                        <h3 class="subsection-title">
                            <span class="label-icon">💰</span>
                            Información Financiera
                        </h3>
                        <div class="info-details">
                            <div class="info-item">
                                <span class="info-label">Monto Total:</span>
                                <span class="info-value amount-total">@Model.MontoTotal.ToString("C2", us)</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Valor del Paquete:</span>
                                <span class="info-value">@Model.ValorTotalPaquete.ToString("C2", us)</span>
                            </div>
                        </div>
                    </div>

                    <div class="info-section">
                        <h3 class="subsection-title">
                            <span class="label-icon">⚖️</span>
                            Información del Envío
                        </h3>
                        <div class="info-details">
                            <div class="info-item">
                                <span class="info-label">Peso (lb):</span>
                                <span class="info-value">@Model.Peso.ToString("N2", us)</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Producto Especial:</span>
                                <span class="info-value">
                                    <span class="@(Model.EsProductoEspecial ? "badge-yes" : "badge-no")">
                                        @(Model.EsProductoEspecial ? "Sí" : "No")
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>